h2(#summary). Summary

Constructable object available in [[Bondi|Bondi Reference]]

h2(#syntax). Syntax

@var fcgiClient = new FastCGIClient();@

h2(#description). Description

h2(#properties). Properties

- ConnectTimeout 
- ReceiveTimeout
- ResponseBody
- ResponseObject 
- ResponseText
- ResponseXML
- SendTimeout
- Status
- StatusText

h2(#methods). Methods

- Close() 
- GetAllResponseHeaders()
- GetResponseHeader()
- Open()
- Send()
- SetRequestHeader()

h2(#examples). Examples

h3. Simple example script

```javascript
#!/home/nwo/bin/bondi

/* this script relies on sandringham being run like so:
 * ./bin/sandringham -logger "/usr/bin/logger \"{message}\"" -children 1 -listen 4050 -service
 */

Response.Write("starting\n");

var s = "args: " + Request.QueryString["script"].join(",") + "\n";
var f = new FastCGIClient();
f.Open("GET", "fastcgi://localhost:4050/logger?message=" + encodeURIComponent(s));
f.Send();

Response.Write("f.Status = " + f.Status + "\n");
Response.Write("done\n");
```

h3. Typical way to call a sandringham service

```javascript
var f = new FastCGIClient();
f.Open("GET", "fastcgi://127.0.0.1:1088/homepage?" + FormData({url:"http://www.google.com/"}));
f.Send();
var NewURL = JSON.parse(f.ResponseBody);
```

h3. Run a bondi script inside a sandringham and pass data to it

h4. FastCGI Call

```javascript
var fcgi = new FastCGIClient();
fcgi.Open("POST", "fastcgi://localhost:1036/mobile/");
fcgi.SetRequestHeader("CONTENT_TYPE", "application/octet-stream");
fcgi.ConnectTimeout = 30000;
fcgi.SendTimeout = 30000;
fcgi.Send(JSON.stringify({
            host: host,
            response:response,
            action:'ProbeMobile',
            url:url,
            href: href,
            merchantid: Request.ServerVariables.MERCHANT
            }));
var fresponse = JSON.parse(fcgi.ResponseBody);
host = fresponse.host;
response = fresponse.response;
fcgi.Close();
```

h4. mobile.esp

```javascript
#mobile.esp
var inp = JSON.parse(Request.BinaryRead());
var response = inp.response;
var host = inp.host;
var MerchantID = inp.merchantid;
Server.Include("/include/mobile.esp");
mobile[inp.action](response, host, catalogurl, href, MerchantID);
Response.ContentType = "application/json";
var json =      JSON.stringify({
        "response" : response,
        "host" : host
});
Response.BinaryWrite(json);
Response.End();
```

h2(#seealso). See also